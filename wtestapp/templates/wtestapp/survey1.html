{% extends 'wtestapp/base.html' %}
{% load static %}

{% block title %}Inclinic experience of Topical Sunscreen in Paediatric{% endblock %}

{% block style %}
<style>
  :root{ --teal:#64c5cb; --purple:#c0769e; --pink:#e664a2; --bg:#fdeef4; --card:#ffffff; }
  body{ background: var(--bg); }
  .survey-card{ background:var(--card); border:1px solid var(--pink); border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.1); padding:24px; }
  .q-title{ font-weight:700; color:var(--purple); font-size: 1.15rem; margin-bottom: 10px; }
  .form-section{ padding:12px 16px; border-radius:12px; background: #fff; margin-bottom:16px; }
  .btn-primary{ background:var(--pink); border-color:var(--pink); padding: 12px 22px; border-radius: 10px; font-weight:700; }
  .btn-primary:hover{ background:var(--purple); border-color:var(--purple); }
  .btn-ghost{ border:1px solid var(--purple); color:var(--purple); border-radius:10px; padding:10px 16px; font-weight:600; background:#fff; }
  .btn-ghost:hover{ background:var(--purple); color:#fff; }
  .option-list{ list-style:none; padding-left:0; margin: 0; }
  .option-item{ display:flex; align-items:center; margin: 8px 0; }
  .option-item input{ position: absolute; opacity: 0; }
  .square-indicator{ width:18px; height:18px; border:2px solid var(--pink); border-radius:4px; display:inline-block; margin-right:10px; transition: all .15s ease; background:#fff; }
  .option-item input[type="radio"]:checked + .square-indicator,
  .option-item input[type="checkbox"]:checked + .square-indicator{ background: var(--pink); border-color: var(--purple); box-shadow: 0 0 0 2px rgba(230,100,162,.15); }
  .option-label{ margin:0; color:#7b3f63; }
</style>
{% endblock %}

{% block content %}
<div class="container my-4">
  <div class="survey-card">
    <h3 class="mb-2" style="font-size: 1.6rem; font-weight: 800;">Inclinic experience of Topical Sunscreen in Paediatric</h3>
    <p class="text-muted">We request you to provide your valuable feedback based on your clinical aspects about usage pattern of topical sunscreen in paediatric category. We humbly request you to share your opinion based on your clinical experience on the following given points.</p>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <form method="post">
      {% csrf_token %}
      <!-- Q1 -->
      <div class="form-section">
        <div class="q-title">1. How often do you recommend sunscreen for infants and toddlers in your clinical practice?</div>
        <ul class="option-list">
          {% for opt in q1_opts %}
          <li class="option-item">
            <input type="radio" id="q1_{{ forloop.counter }}" name="q1" value="{{ opt }}" {% if answers.q1 == opt %}checked{% endif %}>
            <span class="square-indicator"></span>
            <label class="option-label" for="q1_{{ forloop.counter }}">{{ opt }}</label>
          </li>
          {% endfor %}
        </ul>
      </div>

      <!-- Q2 -->
      <div class="form-section">
        <div class="q-title">2. At what minimum age do you typically advise starting sunscreen use in babies?</div>
        <ul class="option-list">
          {% for opt in q2_opts %}
          <li class="option-item">
            <input type="radio" id="q2_{{ forloop.counter }}" name="q2" value="{{ opt }}" {% if answers.q2 == opt %}checked{% endif %}>
            <span class="square-indicator"></span>
            <label class="option-label" for="q2_{{ forloop.counter }}">{{ opt }}</label>
          </li>
          {% endfor %}
        </ul>
      </div>

      <!-- Q3 checkbox multi -->
      <div class="form-section">
        <div class="q-title">3. Under which conditions or indications do you usually recommend sunscreen for babies? (Select all that apply)</div>
        <ul class="option-list">
          {% for opt in q3_opts %}
          <li class="option-item">
            <input type="checkbox" id="q3_{{ forloop.counter }}" name="q3" value="{{ opt }}" {% if answers.q3 and opt in answers.q3 %}checked{% endif %}>
            <span class="square-indicator"></span>
            <label class="option-label" for="q3_{{ forloop.counter }}">{{ opt }}</label>
          </li>
          {% endfor %}
        </ul>
        <div class="mt-2">
          <input type="text" class="form-control" name="q3_other" placeholder="Other (please specify)" value="{{ answers.q3_other|default:'' }}">
        </div>
      </div>

      <!-- Q4 checkbox multi -->
      <div class="form-section">
        <div class="q-title">4. What key factors do you consider while recommending a baby sunscreen? (Select multiple options)</div>
        <ul class="option-list">
          {% for opt in q4_opts %}
          <li class="option-item">
            <input type="checkbox" id="q4_{{ forloop.counter }}" name="q4" value="{{ opt }}" {% if answers.q4 and opt in answers.q4 %}checked{% endif %}>
            <span class="square-indicator"></span>
            <label class="option-label" for="q4_{{ forloop.counter }}">{{ opt }}</label>
          </li>
          {% endfor %}
        </ul>
      </div>

      <!-- Q5 radio with free text when Yes -->
      <div class="form-section">
        <div class="q-title">5. Have you observed any common skin reactions or issues related to sunscreen use in babies?</div>
        <ul class="option-list">
          <li class="option-item">
            <input type="radio" id="q5_yes" name="q5" value="Yes" {% if answers.q5 == 'Yes' %}checked{% endif %}>
            <span class="square-indicator"></span>
            <label class="option-label" for="q5_yes">Yes</label>
          </li>
          <li class="option-item">
            <input type="radio" id="q5_no" name="q5" value="No" {% if answers.q5 == 'No' %}checked{% endif %}>
            <span class="square-indicator"></span>
            <label class="option-label" for="q5_no">No</label>
          </li>
        </ul>
        <div class="mt-2">
          <input type="text" class="form-control" name="q5_detail" placeholder="If Yes, please specify" value="{{ answers.q5_detail|default:'' }}">
        </div>
      </div>

      <!-- Q6 -->
      <div class="form-section">
        <div class="q-title">6. In your experience, how receptive are parents to sunscreen recommendations for their babies?</div>
        <ul class="option-list">
          {% for opt in q6_opts %}
          <li class="option-item">
            <input type="radio" id="q6_{{ forloop.counter }}" name="q6" value="{{ opt }}" {% if answers.q6 == opt %}checked{% endif %}>
            <span class="square-indicator"></span>
            <label class="option-label" for="q6_{{ forloop.counter }}">{{ opt }}</label>
          </li>
          {% endfor %}
        </ul>
      </div>

      <!-- Q7 open ended -->
      <div class="form-section">
        <div class="q-title">7. Which sunscreen brands do you most frequently recommend for children under 5?</div>
        <input type="text" class="form-control" name="q7" value="{{ answers.q7|default:'' }}">
      </div>

      <!-- Q8 -->
      <div class="form-section">
        <div class="q-title">8. What formulation do you prefer recommending for babies?</div>
        <ul class="option-list">
          {% for opt in q8_opts %}
          <li class="option-item">
            <input type="radio" id="q8_{{ forloop.counter }}" name="q8" value="{{ opt }}" {% if answers.q8 == opt %}checked{% endif %}>
            <span class="square-indicator"></span>
            <label class="option-label" for="q8_{{ forloop.counter }}">{{ opt }}</label>
          </li>
          {% endfor %}
        </ul>
      </div>

      <div class="d-flex justify-content-between">
        <button type="submit" name="submit_action" value="save" class="btn btn-ghost">Save Draft</button>
        <div>
          <button type="submit" name="submit_action" value="reset" class="btn btn-ghost mr-2">Clear Selections</button>
          <button type="submit" name="submit_action" value="submit" class="btn btn-primary">Submit Survey</button>
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock %}
